(()=>{var e={1991:(e,t)=>{var l;!function(){"use strict";var r=function(){function e(){}function t(e,t){for(var l=t.length,r=0;r<l;++r)a(e,t[r])}e.prototype=Object.create(null);var l={}.hasOwnProperty,r=/\s+/;function a(e,a){if(a){var n=typeof a;"string"===n?function(e,t){for(var l=t.split(r),a=l.length,n=0;n<a;++n)e[l[n]]=!0}(e,a):Array.isArray(a)?t(e,a):"object"===n?function(e,t){if(t.toString===Object.prototype.toString||t.toString.toString().includes("[native code]"))for(var r in t)l.call(t,r)&&(e[r]=!!t[r]);else e[t.toString()]=!0}(e,a):"number"===n&&function(e,t){e[t]=!0}(e,a)}}return function(){for(var l=arguments.length,r=Array(l),a=0;a<l;a++)r[a]=arguments[a];var n=new e;t(n,r);var o=[];for(var i in n)n[i]&&o.push(i);return o.join(" ")}}();e.exports?(r.default=r,e.exports=r):void 0===(l=function(){return r}.apply(t,[]))||(e.exports=l)}()}},t={};function l(r){var a=t[r];if(void 0!==a)return a.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,l),n.exports}l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},l.d=(e,t)=>{for(var r in t)l.o(t,r)&&!l.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.wp.element,t=window.wp.i18n,r=window.wp.hooks,a=window.wp.components,n=window.wp.data,o=window.wp.blockEditor;function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r])}return e},i.apply(this,arguments)}var s=l(1991),c=l.n(s);function d(t){const{label:l,help:r,className:a,children:n,...o}=t;return(0,e.createElement)("div",i({},o,{className:c()("lazyblocks-component-base-control",a)}),l?(0,e.createElement)("div",{className:"lazyblocks-component-base-control__label"},l):null,n,r?(0,e.createElement)("div",{className:"lazyblocks-component-base-control__help"},r):null)}const{controls:u={}}=window.lazyblocksConstructorData||window.lazyblocksGutenberg;const p=["image"],m=(0,a.withNotices)((function(l){const{label:r,value:i,previewSize:s,noticeOperations:m,noticeUI:g,controlProps:b,onChange:y=(()=>{})}=l,{mediaUpload:v,imagesPreviewData:f}=(0,n.useSelect)((e=>{const{getMedia:t}=e("core"),l={};return i&&Object.keys(i).length&&i.forEach((e=>{if(!l[e.id]){const r=t(e.id)||!1;r&&(l[e.id]={alt:r.alt_text,url:r.source_url},r.media_details&&r.media_details.sizes&&r.media_details.sizes[s]&&(l[e.id].url=r.media_details.sizes[s].source_url))}})),{mediaUpload:e("core/block-editor").getSettings().mediaUpload,imagesPreviewData:l}}));return(0,e.createElement)(d,function(e,{className:t,...l}={}){const r=(a=e.data.type)&&u[a]?u[a]:!!u.undefined&&u.undefined;var a;return{label:!!r.restrictions.label_settings&&e.data.label,help:!!r.restrictions.help_settings&&e.data.help,className:c()(`lazyblocks-control lazyblocks-control-${e.data.type}`,t),"data-lazyblocks-control-name":e.data.name,...l}}(b),i&&Object.keys(i).length?null:(0,e.createElement)(o.MediaPlaceholder,{icon:"format-gallery",labels:{title:r,name:(0,t.__)("images","lazy-blocks")},onSelect:e=>{y(e)},notices:g,accept:"image/*",allowedTypes:p,disableMaxUploadErrorMessages:!0,multiple:!0,onError:e=>function(e){m.removeAllNotices(),m.createErrorNotice(e)}(e)}),i&&Object.keys(i).length?(0,e.createElement)(o.MediaUpload,{onSelect:e=>{y(e)},allowedTypes:p,multiple:!0,gallery:!0,value:i.map((e=>e.id)),render:({open:l})=>(0,e.createElement)("div",{className:"lzb-gutenberg-gallery",onClick:l,role:"presentation"},(0,e.createElement)(a.DropZone,{onFilesDrop:e=>{const t=i||[];v({allowedTypes:p,filesList:e,onFileChange:e=>{y(t.concat(e))},onError:e=>{m.createErrorNotice(e)}})}}),(0,e.createElement)("div",{className:"lzb-gutenberg-gallery-button"},(0,e.createElement)(a.Button,{isSecondary:!0,isSmall:!0},(0,t.__)("Edit Gallery","lazy-blocks"))),i.map((t=>(0,e.createElement)("div",{className:"lzb-gutenberg-gallery-item",key:t.id||t.url},f[t.id]&&f[t.id].url?(0,e.createElement)("img",{src:f[t.id].url,alt:f[t.id].alt}):""))))}):null)}));function g(l){const{updateData:r,data:o}=l,{imageSizes:i,imageDimensions:s}=(0,n.useSelect)((e=>{const{getSettings:l}=e("core/block-editor"),r=l();return{imageSizes:r.imageSizes||[{name:(0,t.__)("Medium","lazy-blocks"),slug:"medium"}],imageDimensions:r.imageDimensions||{medium:{width:300,height:300}}}}));return(0,e.createElement)(a.PanelBody,null,(0,e.createElement)(a.SelectControl,{label:(0,t.__)("Preview Size","lazy-blocks"),options:i.map((e=>{let t=e.name;return s[e.slug]&&(t+=` (${s[e.slug].width} Ã— ${s[e.slug].height})`),{label:t,value:e.slug}})),value:o.preview_size||"medium",onChange:e=>r({preview_size:e})}))}(0,r.addFilter)("lzb.editor.control.gallery.render","lzb.editor",((t,l)=>(0,e.createElement)(m,{label:l.data.label,help:l.data.help,previewSize:l.data.preview_size,value:l.getValue(),controlProps:l,onChange:e=>{const t=e.map((e=>({alt:e.alt||"",title:e.title||"",caption:e.caption||"",description:e.description||"",id:e.id||"",link:e.link||"",url:e.url||"",sizes:e.sizes||""})));l.onChange(t)}}))),(0,r.addFilter)("lzb.editor.control.gallery.getValue","lzb.editor",(e=>{if("string"==typeof e)try{e=JSON.parse(decodeURI(e))}catch(t){e=[]}return e})),(0,r.addFilter)("lzb.editor.control.gallery.updateValue","lzb.editor",(e=>(("object"==typeof e||Array.isArray(e))&&(e=encodeURI(JSON.stringify(e))),e))),(0,r.addFilter)("lzb.constructor.control.gallery.settings","lzb.constructor",((t,l)=>(0,e.createElement)(g,l)))})()})();