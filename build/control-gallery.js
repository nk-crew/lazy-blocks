!function(){var e={1991:function(e,t){var l;!function(){"use strict";var n=function(){function e(){}function t(e,t){for(var l=t.length,n=0;n<l;++n)r(e,t[n])}e.prototype=Object.create(null);var l={}.hasOwnProperty,n=/\s+/;function r(e,r){if(r){var a=typeof r;"string"===a?function(e,t){for(var l=t.split(n),r=l.length,a=0;a<r;++a)e[l[a]]=!0}(e,r):Array.isArray(r)?t(e,r):"object"===a?function(e,t){if(t.toString===Object.prototype.toString||t.toString.toString().includes("[native code]"))for(var n in t)l.call(t,n)&&(e[n]=!!t[n]);else e[t.toString()]=!0}(e,r):"number"===a&&function(e,t){e[t]=!0}(e,r)}}return function(){for(var l=arguments.length,n=Array(l),r=0;r<l;r++)n[r]=arguments[r];var a=new e;t(a,n);var o=[];for(var i in a)a[i]&&o.push(i);return o.join(" ")}}();e.exports?(n.default=n,e.exports=n):void 0===(l=function(){return n}.apply(t,[]))||(e.exports=l)}()}},t={};function l(n){var r=t[n];if(void 0!==r)return r.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,l),a.exports}l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,{a:t}),t},l.d=function(e,t){for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";var e=window.wp.element,t=window.wp.i18n,n=window.wp.hooks,r=window.wp.components,a=window.wp.data,o=window.wp.blockEditor,i=l(1991),c=l.n(i);function s(t){const{label:l,help:n,className:r,children:a,...o}=t;return(0,e.createElement)("div",{...o,className:c()("lazyblocks-component-base-control",r)},l?(0,e.createElement)("div",{className:"lazyblocks-component-base-control__label"},l):null,a,n?(0,e.createElement)("div",{className:"lazyblocks-component-base-control__help"},n):null)}const{controls:d={}}=window.lazyblocksConstructorData||window.lazyblocksGutenberg;function u(e,{className:t,...l}={}){const n=(r=e.data.type)&&d[r]?d[r]:!!d.undefined&&d.undefined;var r;return{label:!!n.restrictions.label_settings&&e.data.label,help:!!n.restrictions.help_settings&&e.data.help,className:c()(`lazyblocks-control lazyblocks-control-${e.data.type}`,t),"data-lazyblocks-control-name":e.data.name,...l}}const p=["image"];var m=(0,r.withNotices)((function(l){const{label:n,value:i,previewSize:c,noticeOperations:d,noticeUI:m,controlProps:g,onChange:b=(()=>{})}=l,{mediaUpload:y,imagesPreviewData:f}=(0,a.useSelect)((e=>{const{getMedia:t}=e("core"),l={};return i&&Object.keys(i).length&&i.forEach((e=>{if(!l[e.id]){const n=t(e.id)||!1;n&&(l[e.id]={alt:n.alt_text,url:n.source_url},n.media_details&&n.media_details.sizes&&n.media_details.sizes[c]&&(l[e.id].url=n.media_details.sizes[c].source_url))}})),{mediaUpload:e("core/block-editor").getSettings().mediaUpload,imagesPreviewData:l}}));return(0,e.createElement)(s,{...u(g)},i&&Object.keys(i).length?null:(0,e.createElement)(o.MediaPlaceholder,{icon:"format-gallery",labels:{title:n,name:(0,t.__)("images","lazy-blocks")},onSelect:e=>{b(e)},notices:m,accept:"image/*",allowedTypes:p,disableMaxUploadErrorMessages:!0,multiple:!0,onError:e=>function(e){d.removeAllNotices(),d.createErrorNotice(e)}(e)}),i&&Object.keys(i).length?(0,e.createElement)(o.MediaUpload,{onSelect:e=>{b(e)},allowedTypes:p,multiple:!0,gallery:!0,value:i.map((e=>e.id)),render:({open:l})=>(0,e.createElement)("div",{className:"lzb-gutenberg-gallery",onClick:l,role:"presentation"},(0,e.createElement)(r.DropZone,{onFilesDrop:e=>{const t=i||[];y({allowedTypes:p,filesList:e,onFileChange:e=>{b(t.concat(e))},onError:e=>{d.createErrorNotice(e)}})}}),(0,e.createElement)("div",{className:"lzb-gutenberg-gallery-button"},(0,e.createElement)(r.Button,{isSecondary:!0,isSmall:!0},(0,t.__)("Edit Gallery","lazy-blocks"))),i.map((t=>(0,e.createElement)("div",{className:"lzb-gutenberg-gallery-item",key:t.id||t.url},f[t.id]&&f[t.id].url?(0,e.createElement)("img",{src:f[t.id].url,alt:f[t.id].alt}):""))))}):null)}));function g(l){const{updateData:n,data:o}=l,{imageSizes:i,imageDimensions:c}=(0,a.useSelect)((e=>{const{getSettings:l}=e("core/block-editor"),n=l();return{imageSizes:n.imageSizes||[{name:(0,t.__)("Medium","lazy-blocks"),slug:"medium"}],imageDimensions:n.imageDimensions||{medium:{width:300,height:300}}}}));return(0,e.createElement)(r.PanelBody,null,(0,e.createElement)(r.SelectControl,{label:(0,t.__)("Preview Size","lazy-blocks"),options:i.map((e=>{let t=e.name;return c[e.slug]&&(t+=` (${c[e.slug].width} Ã— ${c[e.slug].height})`),{label:t,value:e.slug}})),value:o.preview_size||"medium",onChange:e=>n({preview_size:e})}))}(0,n.addFilter)("lzb.editor.control.gallery.render","lzb.editor",((t,l)=>(0,e.createElement)(m,{label:l.data.label,help:l.data.help,previewSize:l.data.preview_size,value:l.getValue(),controlProps:l,onChange:e=>{const t=e.map((e=>({alt:e.alt||"",title:e.title||"",caption:e.caption||"",description:e.description||"",id:e.id||"",link:e.link||"",url:e.url||"",sizes:e.sizes||""})));l.onChange(t)}}))),(0,n.addFilter)("lzb.editor.control.gallery.getValue","lzb.editor",(e=>{if("string"==typeof e)try{e=e.includes(":")?JSON.parse(decodeURI(e)):JSON.parse(decodeURIComponent(e))}catch(t){e=[]}return e})),(0,n.addFilter)("lzb.editor.control.gallery.updateValue","lzb.editor",(e=>(("object"==typeof e||Array.isArray(e))&&(e=encodeURI(JSON.stringify(e))),e))),(0,n.addFilter)("lzb.constructor.control.gallery.settings","lzb.constructor",((t,l)=>(0,e.createElement)(g,{...l})))}()}();