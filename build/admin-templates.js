(()=>{"use strict";const e=window.wp.element,l=window.wp.i18n,t=window.wp.plugins,n=window.wp.data,s=window.wp.coreData,o=window.wp.components,a=window.wp.compose,c=window.wp.editPost,{used_post_types_for_templates:p}=window.lazyblocksTemplatesData||{};(0,t.registerPlugin)("lazy-blocks-template",{render:function(){const{postType:t,postTypes:i,blocks:r}=(0,n.useSelect)((e=>{const{getCurrentPostType:l}=e("core/editor"),{getPostTypes:t}=e("core"),{getBlocks:n}=e("core/block-editor");return{postType:l(),postTypes:t({show_ui:!0,per_page:-1})||[],blocks:n()}}),[]),[u,_]=(0,s.useEntityProp)("postType",t,"meta"),b=u._lzb_template_post_types||[],m=u._lzb_template_lock||"",w=u._lzb_template_blocks||"";function g(e,l){_({...u,[e]:l})}function y(e){const l=[];return e.forEach((e=>{const t=[e.name,e.attributes];e.innerBlocks&&e.innerBlocks.length&&t.push(y(e.innerBlocks)),l.push(t)})),l}const d=(0,e.useCallback)((0,a.useDebounce)((function(e,l){const t=encodeURIComponent(JSON.stringify(y(e)));l!==t&&g("_lzb_template_blocks",t)}),500),[]);(0,e.useEffect)((()=>{d(r,w)}),[r,w,d]);const k=[{label:(0,l.__)("None","lazy-blocks"),value:""},{label:(0,l.__)("All - prevents all operations","lazy-blocks"),value:"all"},{label:(0,l.__)("Insert - prevents inserting new blocks, but allows moving existing ones","lazy-blocks"),value:"insert"},{label:(0,l.__)("Content Only - prevents all operations, except the content editing.","lazy-blocks"),value:"contentOnly"}],z=[],h=[];return i.filter((e=>e.viewable&&"lazyblocks"!==e.slug&&"lazyblocks_templates"!==e.slug&&"attachment"!==e.slug)).forEach((e=>{let{label:l}=e;e.labels&&e.labels.singular_name&&(l=e.labels.singular_name),h.push(e.slug),z.push({label:l,value:e.slug,disabled:p.includes(e.slug)})})),b&&b.length&&b.forEach((e=>{h.includes(e)||z.push({label:e,value:e})})),(0,e.createElement)(c.PluginDocumentSettingPanel,{name:"LZBTemplateSettings",title:(0,l.__)("Template Settings","lazy-blocks"),className:"lzb-template-settings-panel"},(0,e.createElement)(o.PanelRow,null,(0,e.createElement)("div",{style:{width:"100%"}},(0,e.createElement)(o.SelectControl,{label:(0,l.__)("Post Types","lazy-blocks"),multiple:!0,options:z,value:b,onChange:e=>{g("_lzb_template_post_types",e)}}))),(0,e.createElement)(o.PanelRow,null,(0,e.createElement)("div",{style:{width:"100%"}},(0,e.createElement)(o.SelectControl,{label:(0,l.__)("Template Lock","lazy-blocks"),options:k,value:m,onChange:e=>{g("_lzb_template_lock",e)}}))))}})})();