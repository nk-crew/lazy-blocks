(()=>{"use strict";const e=window.wp.element,t=window.wp.i18n,a=window.wp.components;function l({children:a}){return(0,e.createElement)("div",{className:"lazyblocks-component-copied"},a||(0,t.__)("Copied!","lazy-blocks"))}const{navigator:o,lazyblocksToolsData:n}=window;function c(){const[c,s]=(0,e.useState)(!1),[r,i]=(0,e.useState)(!1),[m,d]=(0,e.useState)({}),[p,u]=(0,e.useState)({}),[b,h]=(0,e.useState)(!1),[E,k]=(0,e.useState)(!1),y={showBlocksPHP:c,showTemplatesPHP:r},_={disabledBlocks:m,disabledTemplates:p},x={copiedBlocks:b,copiedTemplates:E},w=(0,e.useRef)({});function N(e="blocks"){const t=e.charAt(0).toUpperCase()+e.slice(1);let a=window.location.href;return n[e].forEach((l=>{_[`disabled${t}`][l.data.id]||(a+=`&lazyblocks_export_${e}[]=${l.data.id}`)})),a}function z(e="blocks"){const t=e.charAt(0).toUpperCase()+e.slice(1);let a="";return n[e].forEach((e=>{_[`disabled${t}`][e.data.id]||(a+=e.php_string_code)})),a&&(a=`add_action( 'lzb/init', function() {\n${a}\n} );`),a}function v(c="blocks"){const r=c.charAt(0).toUpperCase()+c.slice(1),m=Object.keys(_[`disabled${r}`]).length===n[c].length;return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{className:"lzb-export-select-items"},(0,e.createElement)(a.BaseControl,null,(0,e.createElement)(a.ToggleControl,{label:(0,t.__)("Select all","lazy-blocks"),checked:0===Object.keys(_[`disabled${r}`]).length,onChange:()=>{const e={};0===Object.keys(_[`disabled${r}`]).length&&n[c].forEach((t=>{e[t.data.id]=!0})),"Blocks"===r?d(e):"Templates"===r&&u(e)}}),n[c].map((t=>{const l=!_[`disabled${r}`][t.data.id];return(0,e.createElement)(a.ToggleControl,{key:t.data.id,label:(0,e.createElement)(e.Fragment,null,"blocks"===c?(0,e.createElement)(e.Fragment,null,t.data.icon&&/^dashicons/.test(t.data.icon)?(0,e.createElement)("span",{className:t.data.icon}):"",t.data.icon&&!/^dashicons/.test(t.data.icon)?(0,e.createElement)("span",{dangerouslySetInnerHTML:{__html:t.data.icon}}):""," "):"",t.data.title),checked:l,onChange:()=>{const e={..._[`disabled${r}`]};l&&!e[t.data.id]?e[t.data.id]=!0:l||void 0===e[t.data.id]||delete e[t.data.id],"Blocks"===r?d(e):"Templates"===r&&u(e)}})})))),y[`show${r}PHP`]?(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{className:"lzb-export-textarea"},(0,e.createElement)(a.TextareaControl,{className:"lzb-export-code",readOnly:!0,value:z(c)})),(0,e.createElement)("div",{className:"lzb-export-buttons"},(0,e.createElement)("button",{className:"button",onClick:()=>{!function(e="blocks"){const t=e.charAt(0).toUpperCase()+e.slice(1);o.clipboard.writeText(z(e)).then((()=>{"Blocks"===t?h(!0):"Templates"===t&&k(!0),clearTimeout(w.current[t]),w.current[t]=setTimeout((()=>{"Blocks"===t?h(!1):"Templates"===t&&k(!1)}),350)}))}(c)}},(0,t.__)("Copy to Clipboard","lazy-blocks"),x[`copied${r}`]?(0,e.createElement)(l,null):""))):(0,e.createElement)("div",{className:"lzb-export-buttons"},(0,e.createElement)("a",{className:"button button-primary",disabled:m,href:N(c)},(0,t.__)("Export JSON","lazy-blocks")),(0,e.createElement)("button",{className:"button",onClick:()=>{"Blocks"===r?s(!0):"Templates"===r&&i(!0)},disabled:m},(0,t.__)("Generate PHP","lazy-blocks"))))}return(0,e.createElement)("div",{className:"metabox-holder"},(0,e.createElement)("div",{className:"postbox-container"},(0,e.createElement)("div",{id:"normal-sortables"},(0,e.createElement)("div",{className:"postbox-container"},(0,e.createElement)("div",{className:"postbox"},(0,e.createElement)("h2",{className:"hndle"},(0,e.createElement)("span",null,(0,t.__)("Export Blocks","lazy-blocks"))),n.blocks&&n.blocks.length?(0,e.createElement)("div",{className:"inside"},(0,e.createElement)("p",null,(0,t.__)("Select the blocks you would like to export and then select your export method. Use the download button to export to a .json file which you can then import to another Lazy Blocks installation. Use the generate button to export to PHP code which you can place in your theme.")),v("blocks")):(0,e.createElement)("div",{className:"inside"},(0,e.createElement)("p",null,(0,t.__)("There are no blocks to export.")))),(0,e.createElement)("div",{className:"postbox"},(0,e.createElement)("h2",{className:"hndle"},(0,e.createElement)("span",null,(0,t.__)("Export Templates","lazy-blocks"))),n.templates&&n.templates.length?(0,e.createElement)("div",{className:"inside"},(0,e.createElement)("p",null,(0,t.__)("Select the templates you would like to export and then select your export method. Use the download button to export to a .json file which you can then import to another Lazy Blocks installation. Use the generate button to export to PHP code which you can place in your theme.")),v("templates")):(0,e.createElement)("div",{className:"inside"},(0,e.createElement)("p",null,(0,t.__)("There are no templates to export."))))),(0,e.createElement)("div",{className:"postbox-container"},(0,e.createElement)("div",{className:"postbox"},(0,e.createElement)("h2",{className:"hndle"},(0,e.createElement)("span",null,(0,t.__)("Import","lazy-blocks"))),(0,e.createElement)("div",{className:"inside"},(0,e.createElement)("p",null,(0,t.__)("Select the Lazy Blocks JSON file you would like to import. When you click the import button below, Lazy Blocks will import the blocks or templates.")),(0,e.createElement)("form",{method:"post",encType:"multipart/form-data"},(0,e.createElement)("div",{className:"lzb-export-select-items"},(0,e.createElement)("input",{type:"file",name:"lzb_tools_import_json"})),(0,e.createElement)("input",{type:"hidden",name:"lzb_tools_import_nonce",value:n.nonce}),(0,e.createElement)("div",{className:"lzb-export-buttons"},(0,e.createElement)("button",{className:"button button-primary"},(0,t.__)("Import","lazy-blocks"))))))))))}window.addEventListener("load",(()=>{(0,e.render)((0,e.createElement)(c,null),document.querySelector(".lazyblocks-tools-page"))}))})();